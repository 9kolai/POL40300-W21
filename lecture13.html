<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>POL40300: Lecture 13</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/white.css">
		<link rel="stylesheet" href="dist/reveal-override.css"/>

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
		
		<style>
			.blink {
				animation: blink-animation 1s steps(5, start) infinite;
				-webkit-animation: blink-animation 1s steps(5, start) infinite;
			}
			@keyframes blink-animation {
				to {
					visibility: hidden;
				}
			}
			@-webkit-keyframes blink-animation {
				to {
					visibility: hidden;
				}
			}
		</style>
			
	</head>
	<body>
		<header><img src="pic/LogoMainBlue2.png" style="width:100% "></header>
		<div class="reveal">
			<div class="slides">
				<section data-background="pic/BGMainBlue.gif" style="color:white">
					<h1  style="color:white">POL40300: Computational Methods</h1>
					<p>Lecture 13 by Nikolai Gad</p>
					<p>München, 8. February 2022</p>
				</section>
				
				<section>
					<h3 style="color: rgb(0,101,189)">Today's lecture </h3>
					<ul>
						<li>Practicals </li>
						<li>Help options in R </li>
						<li>Recapping some R </li>
						<li>Key concepts from the course </li>
						<li>Loops and subsetting R lists </li>
						
					</ul>
				</section>
				
				
				
				<section>
					<h3 style="color: rgb(0,101,189)">Practicals </h3>
					<section>
						<h3 style="color: rgb(0,101,189)">Course evaluations </h3>
						<p class="fragment">Thanks to everyone who participated! </p>
						<h3 class="fragment">Some general take aways: </h3>
						<ul>
							<li class="fragment">Rush lectures less! </li>
							<li class="fragment">More/longer classes</li>
							<li class="fragment">Too much / too little focus on the technical skills required. </li>
							<ul>
								<li class="fragment">Split class based on previous experiences. </li>
								<li class="fragment">Pre-semester crash course on R</li>
								<li class="fragment">Make R basic knowledge prerequisite for class. </li>
							</ul>
							<li class="fragment">More focus on interpretation of results instead of how to get results. </li>
							<li class="fragment">Better connection between lecture and tutorials. </li>
							<li class="fragment">Project based assessment instead of exam. </li>
						</ul>
						<p class="fragment">Lot of great feedback from the closed quesitons as well, but overall, it seems you found the course harder than previous cohorts, so need to rethink format if taught online again. </p>
					</section>
					

				</section>
				
				
				
				
				<section>
					<h3 style="color: rgb(0,101,189)">The exam - home assignment </h3>
					<section>
						<h3>Practicalities </h3>
						<ul  class="fragment">
							<li>Three hour home assignment: </li>
							<ul>
								<li>Assignment will be published: <strong>Friday 18th February 12.00 (noon)</strong></li>
								<li>Deadline to hand in your assignment: <strong>Friday 18th February 15.00PM</strong></li>
							</ul>
							<li>A special Moodle page will be set up for everyone who are registered for the exam: </li>
							<ul>
								<li>The assignment will be published on this Moodle page. </li>
								<li>And you need to hand in your assignment through this Moodle page. </li>
							</ul>
							<li>Two documents to hand in: A written report and an R script. </li>
							<li>Written report can be submitted as a .doc, .docx or .pdf file. </li>
							<li>You are allowed to use the Internet, your own notes, and books, but it is an individual assignment (ie. any kind of ghost writing or copy pasting is considered plagiarism/cheating and could ultimately get you expelled) </li>
						</ul>
						<h3 class="fragment">Make sure everything is installed and works on your computer in good time! </h3>
					</section>

				</section>
				
		
		
				<section>
					<h3 style="color: rgb(0,101,189)">Overview of R packages </h3>
					<section>
						<p class="fragment">Overview also uploaded to Moodle (incl all functions used in course). </p>
						<ul class="fragment">
							<li>Base, utils, and stats (all build-in to R) </li>
							<li>stringR</li>
							<li>Quanteda: </li>
							<ul>
								<li>quanteda</li>
								<li>quanteda.textstats</li>
								<li>quanteda.textplots</li>
							</ul>
							<li>readtext</li>
							<li>robotstext</li>
							<li>rvest</li>
							<li>(xml2)</li>
							<li>httr</li>
							<li>jsonlite</li>
						</ul>
						<p class="fragment">These are the only packages you should use for the exam! </p>
						<p class="fragment">Make sure these are installed and working on the computer you intend to use for the exam. </p>
					</section>
				</section>
				
				
				
				
				<section>
					<h3 style="color: rgb(0,101,189)">Help options in R </h3>
					<section>
						<h3>Help file for each function </h3>
						<ul>
							<li class="fragment">If you do not remember what a function does or which input it takes. </li>
							<li class="fragment">Access by typing ?functionName, help(functionName) or typing the function name in RStudio and press F1. </li>
							<li class="fragment">Or use search bar in R studio's help pane. </li>
							<li class="fragment">Illustration: sum()</li>
							<li class="fragment">Use the example() function to show examples. </li>
						</ul>
					</section>
					<section>
						<h3>Finding the name of a function </h3>
						<ul>
							<li class="fragment">Use search function in RStudio's help pane: Unfortunately you can only search one word here. </li>
							<li class="fragment">List all functions from a package: </li>
							<ul>
								<li class="fragment">Package name + :: and tab in RStudio. </li>
								<li class="fragment">help(package = "packageName")</li>
							</ul>
							<li class="fragment">Searching for help in R: Also use help.search("searc string") (but doesn't always work well) </li>
							<li class="fragment">Use help.start() to get a list of all packages and help files installed. </li>
						</ul>
					</section>
				</section>
				
				
				
				<section>
					<h3 style="color: rgb(0,101,189)">Questions about R </h3>
					<section>
						<h3>Typical mistake </h3>
						<p class="fragment">Often students refer to variable names in subset functions with double quotes: </p>
						<pre><code class ="r hljs fragment" data-trim data-noescape>
inaugDfmPostWWII <- dfm_subset(inaugDfm, "Year" >= 1945)
						</code></pre>
						<p class="fragment">Never use double quotes when referring to a variable name in dfm_subset()! </br> (or the normal subset() function for that matter) </p>
						<p class="fragment">Be particular aware of this, since it will not through an error and might look like it works!</p>
						<p class="fragment">The correct subsetting should look like this: </p>
						<pre><code class ="r hljs fragment" data-trim data-noescape>
inaugDfmPostWWII <- dfm_subset(inaugDfm, Year >= 1945)
						</code></pre>
						<p class="fragment">So what are the consequences of using double quotes?</p>
					</section>
					<section>
						<h3 style="color: rgb(0,101,189)">Trimming a document-feature-matrix </h3>
						<h3>Example corpus: </h3>
						<table>
							<tr>
								<th>Doc ID: </th>
								<th>Docvar1: </th>
								<th>Text: </th>
							</tr>
							<tr>
								<td>Elephant </td>
								<td>Wild animal</td>
								<td>I am an elephant. </td>
							</tr>
							<tr>
								<td>Lion </td>
								<td>Wild animal</td>
								<td>I am a lion. </td>
							</tr>
							<tr>
								<td>Dog</td>
								<td>Pet animal</td>
								<td>I am a dog. </td>
							</tr>
						</table>
					</section>
					<section data-auto-animate>
						<h3>Document-feature-matrix: </h3>
						<table data-id="table-animation">
							<tr>
								<th>Doc ID: \ Tokens: </th>
								<td>I</td>
								<td>am</td>
								<td>an</td>
								<td>elephant</td>
								<td>.</td>
								<td>a</td>
								<td>lion</td>
								<td>dog</td>
							</tr>
							<tr>
								<th>Elephant: </th>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>0</td>
								<td>0</td>
								<td>0</td>
							</tr>
							<tr>
								<th>Lion: </th>
								<td>1</td>
								<td>1</td>
								<td>0</td>
								<td>0</td>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>0</td>
							</tr>
							<tr>
								<th>Dog: </th>
								<td>1</td>
								<td>1</td>
								<td>0</td>
								<td>0</td>
								<td>1</td>
								<td>1</td>
								<td>0</td>
								<td>1</td>
							</tr>
							<tr>
								<th>Total: </th>
								<td>3</td>
								<td>3</td>
								<td>1</td>
								<td>1</td>
								<td>3</td>
								<td>2</td>
								<td>1</td>
								<td>1</td>
							</tr>
						</table>
					</section>
					<section data-auto-animate>
						<pre><code class ="r hljs" data-trim data-noescape>
dfmWild <- dfm_subset(dfm_animals, Docvar1 == "Wild animal")
						</code></pre>
						<h3>Document-feature-matrix: </h3>
						<table data-id="table-animation">
							<tr>
								<th>Doc ID: \ Tokens: </th>
								<td>I</td>
								<td>am</td>
								<td>an</td>
								<td>elephant</td>
								<td>.</td>
								<td>a</td>
								<td>lion</td>
								<td>dog</td>
							</tr>
							<tr>
								<th>Elephant: </th>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>0</td>
								<td>0</td>
								<td>0</td>
							</tr>
							<tr>
								<th>Lion: </th>
								<td>1</td>
								<td>1</td>
								<td>0</td>
								<td>0</td>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>0</td>
							</tr>
							<tr style="color:red;" class="blink">
								<th>Dog: </th>
								<td>1</td>
								<td>1</td>
								<td>0</td>
								<td>0</td>
								<td>1</td>
								<td>1</td>
								<td>0</td>
								<td>1</td>
							</tr>
							<tr>
								<th>Total: </th>
								<td>3</td>
								<td>3</td>
								<td>1</td>
								<td>1</td>
								<td>3</td>
								<td>2</td>
								<td>1</td>
								<td>1</td>
							</tr>
						</table>
					</section>
					<section data-auto-animate>
						<pre><code class ="r hljs" data-trim data-noescape>
dfmWild <- dfm_subset(dfm_animals, Docvar1 == "Wild animal")
						</code></pre>
						<h3>Document-feature-matrix: </h3>
						<table data-id="table-animation">
							<tr>
								<th>Doc ID: \ Tokens: </th>
								<td>I</td>
								<td>am</td>
								<td>an</td>
								<td>elephant</td>
								<td>.</td>
								<td>a</td>
								<td>lion</td>
								<td>dog</td>
							</tr>
							<tr>
								<th>Elephant: </th>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>0</td>
								<td>0</td>
								<td>0</td>
							</tr>
							<tr>
								<th>Lion: </th>
								<td>1</td>
								<td>1</td>
								<td>0</td>
								<td>0</td>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>0</td>
							</tr>
							<tr>
								<th>Total: </th>
								<td>2</td>
								<td>2</td>
								<td>1</td>
								<td>1</td>
								<td>2</td>
								<td>1</td>
								<td>1</td>
								<td>0</td>
							</tr>
						</table>
					</section>
					<section data-auto-animate>
						<pre><code class ="r hljs" data-trim data-noescape>
dfmWild <- dfm_subset(dfm_animals, Docvar1 == "Wild animal")
						</code></pre>
						<h3>Document-feature-matrix: </h3>
						<table data-id="table-animation">
							<tr>
								<th>Doc ID: \ Tokens: </th>
								<td>I</td>
								<td>am</td>
								<td>an</td>
								<td>elephant</td>
								<td>.</td>
								<td>a</td>
								<td>lion</td>
								<td style="color:red">dog</td>
							</tr>
							<tr>
								<th>Elephant: </th>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>0</td>
								<td>0</td>
								<td style="color:red">0</td>
							</tr>
							<tr>
								<th>Lion: </th>
								<td>1</td>
								<td>1</td>
								<td>0</td>
								<td>0</td>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td style="color:red">0</td>
							</tr>
							<tr>
								<th>Total: </th>
								<td>2</td>
								<td>2</td>
								<td>1</td>
								<td>1</td>
								<td>2</td>
								<td>1</td>
								<td>1</td>
								<td style="color:red">0</td>
							</tr>
						</table>
					</section>
					<section data-auto-animate>
						<pre><code class ="r hljs" data-trim data-noescape>
dfmWild <- dfm_trim(dfmWild, min_termfreq = 1)
						</code></pre>
						<h3>Document-feature-matrix: </h3>
						<table data-id="table-animation">
							<tr>
								<th>Doc ID: \ Tokens: </th>
								<td>I</td>
								<td>am</td>
								<td>an</td>
								<td>elephant</td>
								<td>.</td>
								<td>a</td>
								<td>lion</td>
							</tr>
							<tr>
								<th>Elephant: </th>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>0</td>
								<td>0</td>
							</tr>
							<tr>
								<th>Lion: </th>
								<td>1</td>
								<td>1</td>
								<td>0</td>
								<td>0</td>
								<td>1</td>
								<td>1</td>
								<td>1</td>
							</tr>
							<tr>
								<th>Total: </th>
								<td>2</td>
								<td>2</td>
								<td>1</td>
								<td>1</td>
								<td>2</td>
								<td>1</td>
								<td>1</td>
							</tr>
						</table>
					</section>
					<section>
						<h3>Rvest: html_node() vs html_element()</h3>
						<p class="fragment">html_node() and html_nodes() functions are deprecated, meaning we should not actually use them. </p>
						<p class="fragment">Instead they have been replaced with html_element() and html_elements() which work in exactly the same way. </p>
						<p class="fragment">No plans to remove html_node() and html_nodes() from package. </p>
						<h3 class="fragment">So feel free to use either function. They do the same. </h3>
					</section>
				</section>
				
				
				
			
				
				
				
				


				
				
				
				
				
				<section>
					<h3 style="color: rgb(0,101,189)">Key concepts from course </h3>
					<section>
						<h3>Big Data and Political Science I</h3>
						<ul>
							<li class="fragment">A question of size? </li>
							<li class="fragment">National Institute of Standards and Technology: Parallel computing needed instead of horizontal scaling. </li>
							<li class="fragment">Brady: "A change in our cognitive environment" - The nature of big data is different: </li>
							<ul>
								<li class="fragment">Digitalised data: Structured and replicable. </li>
								<li class="fragment">Connectedness: (almost) Instant access and feedback. </li>
								<li class="fragment">Networked: Point-to-point and many-to-many, individualised/targeted mass communnication. </li>
								<li class="fragment">Automatically recorded in real-time. </li>
							</ul>
						</ul>
					</section>
					<section>
						<h3>Big Data and Political Science II</h3>
						<p>Salganik (2018): Bit by Bit</p>
						<ol class="fragment">
							<li>Big </li>
							<li>Always-on </li>
							<li>Nonreactive </li>
							<li>Incomplete </li>
							<li>Inaccessible </li>
							<li>Nonrepresentative </li>
							<li>Drifting </li>
							<li>Algorithmically confounded </li>
							<li>Dirty </li>
							<li>Sensitive </li>
						</ol>
					</section>
					<section>
						<h3>Big Data III</h3>
						<p class="fragment">Pros: </p>
						<ul>
							<li class="fragment">Data about whole networks </li>
							<li class="fragment">Real-time data </li>
							<li class="fragment">Hidden patterns </li>
						</ul>
						<p class="fragment">Cons/Challenges: </p>
						<ul>
							<li class="fragment">Unrepresentative samples: </li>
							<ul>
								<li class="fragment">Internet users generally not representative. </li>
								<li class="fragment">User of specific platforms even less so. </li>
								<li class="fragment">Nudging by platforms affects online behaviour. </li>
							</ul>
							<li class="fragment">Absence of data. </li>
							<li class="fragment">Access to data. </li>
						</ul>
					</section>
					<section>
						<h3>Data-driven vs. theory driven research</h3>
						<div style="float: left; width: 45%">
							<h3>Traditional PolSci methods: </h3>
							<ul>
								<li class="fragment">Research Question</li>
								<li class="fragment">Hypothesis </li>
								<li class="fragment">Conceptualisation </li>
								<li class="fragment">Operationalisation </li>
								<li class="fragment">Measurement / Data </li>
							</ul>
						</div>
						<div style="float: right; width: 45%">
							<h3>Data-driven methods: </h3>
							<ul>
								<li class="fragment">Data first! </li>
								<li class="fragment">What does it represent? (Operationalisation) </li>
								<li class="fragment">What does it mean? (conceptualisation) </li>
								<li class="fragment">What can it tell us? (hypothesis) </li>
								<li class="fragment">What can we learn from this? (RQ) </li>
							</ul>
						</div>
						<q style="position: absolute; bottom: 0px; font-size: x-small">Traditional approach loosely based on Adcock, R., & Collier, D. (2001). Measurement Validity: A Shared Standard for Qualitative and Quantitative Research. American Political Science Review, 95(3), 529–546.</q>
					</section>
					<section>
						<h3>Machine Learning </h3>
						<table>
							<thead>
								<tr>
									<th></th>
									<th colspan="2" style="text-align: center;">Scale</th>
								</tr>
								<tr>
									<th></th>
									<th>Categorical</th>
									<th>Continuous (scaling)</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<th>Supervised </th>
									<td>Classification (known categories) </td>
									<td>Scaling (known scale) </td>
								</tr>
								<tr>
									<th>Unsupervised </th>
									<td>Clustering (unkown categories) </td>
									<td>Exploring dimensions (unknown scale) </td>
								</tr>
							</tbody>
						</table>
					</section>
					<section>
						<h3 style="color: rgb(0,101,189)">Possibilities with computational text analysis </h3>
						<p class="fragment">Grimmer & Stewart's (2013) four principles of automated text analysis: </p>
						<ol>
							<li class="fragment">All quantitative models of language are wrong - but some are useful. <span class="fragment"><em>They can be useful in several ways: </em></span></li>
							<ul>
								<li class="fragment">Assigning documents into predetermined categories (replacing human coding). </li>
								<li class="fragment">Help discover new and useful categories. </li>
								<li class="fragment">Measuring theoretically relevant quantities. </li>
							</ul>
							<li class="fragment">Quantitative moddels for text amplify resources and augment humans. </li>
							<li class="fragment">There is no globally best method for automated text analysis. </li>
							<li class="fragment">Validate, validate, validate! </li>
							<ul>
								<li class="fragment">For supervised methods: Demonstrate that machine classifications replicates human coding. </li>
								<li class="fragment">For unsupervised methods: Demonstrate that measures produced corresponds to concepts claimed. </li>
								<li class="fragment">For dictionary analysis: Both methods can be relevant. </li>
							</ul>
						</ol>
					</section>
					<section>
						<h2>Validate dictionary </h2>
						<p class="fragment">Three key issues we want to be aware of: </p>
						<ul>
							<li class="fragment">Validity: Does the categories actually make sense and represent well the concept we are interested in? </li>
							<li class="fragment">Recall: Does the dictionary capture all the content related to concept? </li>
							<li class="fragment">Precision: Does the dictionary only capture the content related to concept? </li>
						</ul>
						<p class="fragment">So recall and precision could be measured as: </p>
						<ul>
							<li class="fragment">Recall: Proportion of all mentions of concept that is actually captured by our dictionary. </li>
							<li class="fragment">Precision: Proportion of all the content captured by the dictionary which actually relates to concept of interest. </li>
						</ul>
					</section>
					<section>
						<h1 class="fragment">Validation of dictionary </h1>
						<h3 class="fragment">Example from Maerz (2019): Simulating pluralism: language of democracy in hegemonic authoritarianism. </h3>
						<ul>
							<li class="fragment">Qualitative check of codings in sample of 110 speeches. </li>
							<ul>
								<li class="fragment">Random sample of 5% of speeches from each case, excluding those already used to construct dictionary. </li>
								<li class="fragment">Keywords-in-context search. </li>
							</ul>
							<li class="fragment">Frequent negations and ambigiuous terms excluded. </li>
						</ul>
						<p class="fragment"><a href="Dictionary+for+the+Analysis.html">Final dictionary available from link in paper. </a></p>
					</section>
					<section>
						<h2>Approach to build a good dictionary: </h2>
						<ol>
							<li class="fragment">Identify "extreme texts" with known positions. </li>
							<li class="fragment">Use word frequencies from each group to identify words that occur often in one group, but rarely in the other. </li>
							<li class="fragment">Check these keywords in context to measure precision (possibly just take a random smaple)</li>
							<li class="fragment">Consider need to stem keywords. </li>
						</ol>
					</section>
					<section>
						<h3>Ethics and privacy </h3>
						<ul>
							<li class="fragment">Seven basic principles of the ECPR </li>
							<li class="fragment">Six potential lawful bases to collect data according to the ECPR </li>
							<li class="fragment">Consequentialism vs. deontology </li>
							<li class="fragment">Four ethical principles (respect for people, beneficience, justice, respect for law and public interest) </li>
						</ul>
					</section>
					<section>
						<h3>Why does statistical significance matter when not working with sample data? </h3>
						<ul>
							<li class="fragment">Two potential reasons: </li>
							<ul>
								<li class="fragment">Generalising beyond specific cases (and times). </li>
								<li class="fragment">In terms of Keyness analysis, there is a problem of meaningfull ranking as well. </li>
							</ul>
						</ul>
						<h3 class="fragment">Any other reasons? </h3>
					</section>
				</section>
				
				
				
				
				
				
				
				
				<section>
					<h3 style="color: rgb(0,101,189)">Recapping a few R functionalities </h3>
					<section>
						<h3>For loops</h3>
						<p class="fragment">In the last two weeks you have had to use for loops to repeat the same task many time, so let us just go through the syntax of a typical for loop: </p>
						<pre><code class ="r hljs fragment" data-trim data-noescape>
> for(i in 1:5) {
	print(1:i)
}
[1] 1
[1] 1 2
[1] 1 2 3
[1] 1 2 3 4
[1] 1 2 3 4 5
						</code></pre>
					</section>
					<section>
						<h3>Looping through a vector </h3>
						<p class="fragment">So we can use this to loop through all the values of a vector (for example a vector consisting of url's) </p>
						<pre><code class ="r hljs fragment" data-trim data-noescape>
vecEx <- c("url1", "url2", "url3")
<span class="fragment">
> for (i in 1:length(vecEx)) {
+   print(vecEx[i])
+ }
[1] "url1"
[1] "url2"
[1] "url3" </span>
						</code></pre>
						<p class="fragment">Instead of just printing out the values of each element of the vector, we would typically do some computation with these values. </p>
					</section>
					<section>
						<h3>Save results from each loop in a variable. </h3>
						<p class="fragment">Often we want to save some result from the calculation the loop performs for each circulation of the loop. </p>
						<p class="fragment">To do that, we need to <em>initiate</em> the variable we want to save the results in before running the loop; typically a vector, data frame or list. </p>
						<p class="fragment">That means we create an empty variable (vector/data frame/list) where we can save the results in: </p>
						<pre><code class ="r hljs fragment" data-trim data-noescape>
> results <- c()
<span class="fragment">
> for (i in 1:length(vecEx)) {
+   n <- str_c(vecEx[i], " is a link. ")
+   results[i] <- n
+ }
</span><span class="fragment">
> results
[1] "url1 is a link. " "url2 is a link. " "url3 is a link. "</span>
						</code></pre>
					</section>
					<section>
						<h3>Sub setting R lists. </h3>
						<p class="fragment">Sometimes we have lists nested within lists. List of lists, where we want to only select the nth element of each sublist: </p>
						<pre><code class ="r hljs fragment" data-trim data-noescape>
> head(summary(listResultECD))
       Length Class  Mode
146143 19     -none- list
273647 19     -none- list
273564 19     -none- list
273487 19     -none- list
273483 19     -none- list
273237 19     -none- list
<span class="fragment">
> summary(listResultECD[[1]])
                    Length Class      Mode     
form                1      -none-     character
title               1      -none-     character
api_url             1      -none-     character
eurlex_perma_url    1      -none-     character
doc_id              1      -none-     character
date_document       1      -none-     character
of_effect           1      -none-     character
end_validity        1      -none-     character
oj_date             1      -none-     character
directory_codes     1      data.frame list     
legal_basis         1      data.frame list     
addressee           1      -none-     character
internal_ref        1      -none-     character
additional_info     1      -none-     character
text_url            1      -none-     character
prelex_relation     0      -none-     list     
relationships       3      data.frame list     
eurovoc_descriptors 1      data.frame list     
subject_matter      1      data.frame list  
</span>
						</code></pre>
						
					</section>
					<section>
						<h3>Sub setting R lists. </h3>
						<p class="fragment">In this case we can use a little trick with the lapply function you encountered last week. </p>
						<p class="fragment">Imagine we want the 4th elment of each sub list within the list listResultECB: </p>
						<pre><code class ="r hljs fragment" data-trim data-noescape>
> lapply(listResultECD, "[[", 4)
$`146143`
[1] "http://eur-lex.europa.eu/LexUriServ/LexUriServ.do?uri=CELEX:22007A0116(01):EN:NOT"

$`273647`
[1] "http://eur-lex.europa.eu/LexUriServ/LexUriServ.do?uri=CELEX:32011O0003R(02):EN:NOT"

$`273564`
[1] "http://eur-lex.europa.eu/LexUriServ/LexUriServ.do?uri=CELEX:32011D0008(01)R(01):EN:NOT"

$`273487`
[1] "http://eur-lex.europa.eu/LexUriServ/LexUriServ.do?uri=CELEX:32010D0022R(01):EN:NOT"

$`273483`
[1] "http://eur-lex.europa.eu/LexUriServ/LexUriServ.do?uri=CELEX:32010D0015(01):EN:NOT"

$`273237`
[1] "http://eur-lex.europa.eu/LexUriServ/LexUriServ.do?uri=CELEX:32004D0012(01)R(01):EN:NOT"
						</code></pre>
					</section>
					<section>
						<h3>Sub setting R lists. </h3>
						<p class="fragment">We can also use the name of the element we want to extract from each sub list:  </p>
						<pre><code class ="r hljs fragment" data-trim data-noescape>
> lapply(listResultECD, "[[", "title")
$`146143`
[1] "Memorandum of Understanding amending the Memorandum of Understanding on a Code of Conduct for the members of the Governing Council"

$`273647`
[1] "This corrigendum does not concern the English version."

$`273564`
[1] "This corrigendum does not concern the English version."

$`273487`
[1] "This corrigendum does not concern the English version."

$`273483`
[1] "2010/574/EU: Decision of the European Central Bank of 21 September 2010 concerning the administration of EFSF loans to Member States whose currency is the euro (ECB/2010/15)"

$`273237`
[1] "This corrigendum does not concern the English version."
						</code></pre>
					</section>
					<section>
						<h3 style="color: rgb(0,101,189)">Apply functions </h3>
						<p class="fragment">We have used several functions from the apply family in R: </p>
						<ul>
							<li class="fragment"><strong>apply:</strong>Applies a function to either each row or each column of a data frame. </li>
							<li class="fragment"><strong>tapply:</strong>Applies a function to a variable, depending on the value of another variable in a data frame. </li>
							<li class="fragment"><strong>lapply:</strong>Applies a function to each element of a list (and always returns a list). </li>
							<li class="fragment"><strong>(do.call:</strong>Takes a list of arguments as input to a function. <strong>)</strong></li>
						<p class="fragment">And then there is also...</p>
							<li class="fragment"><strong>sapply:</strong> ("smart apply") Applies a function to each element of a list, and returns "the most appropriate" data format. </li>
						</ul>
					</section>
				</section>
				



				<section>
					<h1>Thanks and see you tomorrow!</h1>
				</section>

				
				
			</div>
		</div>
		

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
